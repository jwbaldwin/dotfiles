#!/bin/zsh
# vim: filetype=sh
RED='\033[0;31m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
NC='\033[0m'

# Edit and Source shortuts
alias ebash="e ~/.bashrc"
alias sbash="source ~/.bashrc"
alias ezsh="e ~/.zshrc"
alias szsh="source ~/.zshrc"
alias edotfiles="e ~/.aliases"

# EMACS ALIASES
alias e="emacsclient -nc"
alias em="emacsclient -n"
alias et="emacsclient -nw"
alias emacs="~/.local/bin/emacs"
# emacs daemon
alias emd="emacs --daemon"
# emacs kill
alias emk="killall Emacs && killall emacs"

export ALTERNATE_EDITOR=""
export EDITOR="emacsclient -c"                  # $EDITOR opens in GUI mode
export VISUAL="emacsclient -c -a emacs"         # $VISUAL opens in GUI mode

# LVIM ALIASES
alias v="lvim"
# alias vim="lvim" except this
alias vi="lvim"
alias lv="lvim"

# Program related
alias gg="./gradlew"
alias exserver="iex -S mix phx.server"


# Docker related
alias dcu="docker-compose up -d"
alias dc="docker-compose"

# Command-line related
alias lsa='ls -a'
alias personal="cd ~/repos/personal"

### Remote Specific ###
# movement
alias tgr="cd ~/repos/tiger"
alias tiger="tgr"
alias drgn="cd ~/repos/dragon"
alias dragon="drgn"

# operations
alias tiger-up="git pull && mix deps.get --force && mix compile && MIX_ENV=test mix compile && mix ecto.migrate && MIX_ENV=test mix ecto.migrate"

alias infra-up="echo -e '${GREEN}Starting Tiger infra: postgres and redis${NC}\n' && pg_ctl start && redis-server &"
alias infra-down="echo -e '${RED}Stopping Tiger infra: postgres and redis${NC}\n' && pg_ctl stop && killall redis-server"

upd() {
  cd ~/repos/tiger
  git checkout master
  git pull origin master
  MIX_ENV=test mix ecto.drop
  mix test.setup
}

alias staging_remote="echo -e '========= CONNECTING TO ${YELLOW}[STAGING]${NC} =========\n' && remotectl k8s shell tiger-api -e staging -l -c -r engineer"
alias prod_remote="echo -e '${RED}========= CONNECTING TO [PRODUCTION] =========${NC} \n' && remotectl k8s shell tiger-api -e production -c -r engineer"

alias login_staging_remote="echo -e '${YELLOW}=== LOGGING INTO [STAGING] ===${NC} \n' && remotectl k8s use staging -r devops -l"
alias login_prod_remote="echo -e '${RED}=== LOGGING INTO [PRODUCTION] ===${NC} \n' && remotectl k8s use production -r devops -l"

alias fix_argon="cd ~/repos/tiger && mix deps.clean argon2_elixir && mix deps.get && rm -rf deps/argon2_elixir/priv && cd -"
alias stripe_nl="stripe listen --api-key sk_test_51Hejj5C9nQV5leL26mjbHwEauWgVkI4yHEA46F6eHQIZKXxCxydtuyxEaoGL87DFBCjQT5i3KBLbR98Z5iEnh3ug00hVuFXUPR  -f localhost:4000/api/v1/payment-methods-nl"
alias stripe_us="stripe listen --api-key sk_test_EFXTnee8RunsgppmLPCY2WaV -f localhost:4000/api/v1/payment-methods-us"

### Asdf Updating nvim ###
alias update-nvim-stable='asdf uninstall neovim stable && asdf install neovim stable'
alias update-nvim-nightly='asdf uninstall neovim nightly && asdf install neovim nightly'
alias update-nvim-master='asdf uninstall neovim ref:master && asdf install neovim ref:master'
